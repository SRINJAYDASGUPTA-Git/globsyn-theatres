<app-navbar></app-navbar>
<div class="flex items-center justify-center gap-4 p-5">
  <img
    [src]="movie.poster"
    alt="{{ movie.name }}"
    class="w-1/3 md:w-1/4 h-auto object-cover rounded-lg shadow-md"
  />
  <form
    #ticketForm="ngForm"
    class="w-full md:w-1/3 bg-white/40 p-5 py-6 rounded-xl backdrop-blur-sm flex flex-col gap-5 form-signin"
  >
    <span class="text-4xl md:text-3xl py-4 font-bold heading">
      Book Your Ticket
    </span>
    <div class="flex flex-col w-full md:w-full bg-white p-4 rounded-xl text-sm gap-3">
      <label>Name:</label>
      <input
        type="text"
        name="name"
        required
        [(ngModel)]="ticketRequest.name"
        autofocus
        #name="ngModel"
        placeholder="Enter your Name"
        class="bg-transparent border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500"
      />
      <label>Select Seat Type:</label>
      <select
        name="seatType"
        [(ngModel)]="ticketRequest.seatType"
        (ngModelChange)="onSeatTypeChange($event)"
        required
        class="bg-transparent border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500"
      >
        <option *ngFor="let seat of screen.seatLayout" [value]="seat.type">
          {{ seat.type }}
        </option>
      </select>
      <label>No. of tickets:</label>
      <input
        type="number"
        name="tickets"
        min="1"
        [max]="availableTickets"
        required
        [(ngModel)]="ticketRequest.tickets"
        (ngModelChange)="updateSeats($event)"
        placeholder="1"
        class="bg-transparent border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500"
      />
      <p class="text-lg">Select your showtime:</p>
      <select
        name="time"
        [(ngModel)]="ticketRequest.time"
        (ngModelChange)="onTimeChange($event)"
        required
        class="bg-transparent border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500"
      >
        <option *ngFor="let schedule of schedules" [value]="schedule.start_time">
          {{ schedule.start_time }}
        </option>
      </select>
      <label>Select Show Date:</label>
      <select
        name="date"
        [(ngModel)]="ticketRequest.date"
        required
        class="bg-transparent border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500"
      >
        <option *ngFor="let date of availableDates" [value]="date">
          {{ date }}
        </option>
      </select>
    </div>
    <button
      (click)="bookTicket()"
      type="submit"
      class="rounded-xl p-2 bg-[#f84464] text-white w-1/2 mx-auto"
    >
      Pay: &#x20B9; {{ ticketRequest.tickets > 0 ? (ticketRequest.price + 200.0) : 0 }}
    </button>
  </form>
</div>
